<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Message Receiver and Sender</title>
	</head>

	<body>
		<h1>消息接收与发送页面</h1>
		<button id="sendMessageButton">点击向父页面发送消息</button>
		<div id="messageDisplay">接收到的消息会显示在这里</div>

		<script>
			// 监听来自父页面的消息
			// 在iframe页面控制台执行
window.parent.postMessage({test: 'hello'}, '*')
			window.parent.postMessage({
				data: {
					appId: '5xZtNq01x0L6WmMnG7gFAo'//第三方应用ID
				}
			}, '*')
			window.addEventListener('message', function(event) {
				const message = event.data;
				console.log(message)
				console.log('HTML接收数智人大H5发送过来的消息（SZRD-H5）:', message);
				//拿到szrdAccessToken进行登录等操作
				// let szrdAccessToken= message.szrdAccessToken
			});
			// 点击按钮向父页面发送消息
			const sendMessageButton = document.getElementById('sendMessageButton');
			sendMessageButton.addEventListener('click', function () {
				console.log('发送id')
			const message = {data: {
			appId: '5xZtNq01x0L6WmMnG7gFAo' //第三方应用ID
			}}; 
			window.parent.postMessage(message, '*');

			});



			// 调用定位接口
window.getLocationFromApp();

// 调用扫一扫接口
window.scanCodeFromApp();

			window.addEventListener('message', function(event) {
  if (event.data.type === 'locationInfo') {
    console.log('定位信息:', event.data.data);
  } else if (event.data.type === 'scanResult') {
    console.log('扫码结果:', event.data.data);
  }
});
		</script>
	</body>

</html>
